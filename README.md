# persian-formatter



مبدل متن فارسی برای بازی‌های پارادوکس (Persian Text Converter for Paradox Games)
این پروژه یک اسکریپت پایتون است که برای حل مشکل نمایش متون فارسی در بازی‌های استراتژی شرکت پارادوکس (Paradox Interactive) مانند Crusader Kings III, Victoria 3, Europa Universalis IV و Hearts of Iron IV طراحی شده است.



مشکل چیست؟
موتور بازی‌سازی شرکت پارادوکس (Clausewitz Engine) به طور پیش‌فرض با نمایش صحیح زبان‌های راست-به-چپ (RTL) مانند فارسی که حروف آن‌ها به یکدیگر می‌چسبند (Contextual Shaping)، مشکل دارد. اگر متن فارسی استاندارد را مستقیماً در فایل‌های بازی قرار دهید، حروف به صورت جدا از هم و از چپ-به-راست نمایش داده می‌شوند.



این موتور به جای دریافت متن استاندارد، انتظار یک فرمت بصری خاص و از پیش پردازش شده را دارد.



راه‌حل چیست؟
این اسکریپت، فایل‌های ترجمه شده با فرمت استاندارد فارسی را به عنوان ورودی دریافت کرده و آن‌ها را به فرمت بصری مورد نیاز بازی تبدیل می‌کند. این فرآیند شامل دو مرحله کلیدی است:

شکل‌دهی حروف (Reshaping): تبدیل حروف جدا به شکل‌های صحیح ابتدایی، میانی و انتهایی.
تنظیم ترتیب نمایش (Bidirectional Algorithm): برعکس کردن ترتیب حروف برای نمایش صحیح در موتور بازی که چپ-به-راست است.
با این کار، متن نهایی در بازی به صورت کاملاً صحیح، چسبان و خوانا نمایش داده می‌شود.



ویژگی‌ها
پشتیبانی کامل از فایل‌های localization با فرمت .yml
پردازش خودکار تمام فایل‌های موجود در پوشه input
حفظ کامل ساختار فایل، کلیدها و متغیرهای داخل بازی (مانند $VAR$ یا [Scope.GetName])
سازگار با اکثر بازی‌های جدید شرکت پارادوکس
استفاده آسان حتی برای کاربرانی که با برنامه‌نویسی آشنایی ندارند
پیش‌نیازها
برای اجرای این اسکریپت، به موارد زیر نیاز دارید:

پایتون (Python 3.6+) نصب شده روی سیستم شما.
دو کتابخانه که با دستور زیر به راحتی نصب می‌شوند:
Bash

pip install arabic-reshaper python-bidi



نحوه استفاده
ابتدا پروژه را دانلود کرده یا با دستور git clone آن را روی کامپیوتر خود کپی کنید.

در پوشه اصلی پروژه، دو پوشه جدید با نام‌های input و output بسازید.

فایل یا فایل‌های .yml خود را که به فارسی استاندارد و خوانا ترجمه کرده‌اید، در پوشه input قرار دهید.

ترمینال یا Command Prompt را باز کرده، به پوشه پروژه بروید و اسکریپت را با دستور زیر اجرا کنید:

Bash

python formatter.py
(اگر نام اسکریپت را چیز دیگری گذاشته‌اید، آن را جایگزین formatter.py کنید)

پس از اجرای موفقیت‌آمیز، فایل‌های نهایی با فرمت صحیح و آماده برای استفاده در بازی، در پوشه output ساخته می‌شوند. این فایل‌ها را می‌توانید مستقیماً در پوشه localization ماد خود در بازی کپی کنید.



مشارکت
از هرگونه پیشنهاد، گزارش خطا (Bug Report) یا مشارکت در بهبود این اسکریپت از طریق Pull Request در گیت‌هاب به گرمی استقبال می‌شود.

مجوز (License)
این پروژه تحت مجوز MIT منتشر شده است. این به این معنی است که شما آزاد هستید از آن برای هر منظور شخصی یا تجاری استفاده کنید.
